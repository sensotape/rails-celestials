<div class="container" id="welcome">
  <div><h1>Welcome, <%= current_user.first_name %>!</div>
  <div class="avatar-circle"><%= cl_image_tag current_user.avatar,
      transformation: [{ height: 200, width: 200, crop: :thumb, gravity: :face}] %></h1></div>
</div>

<div class="tab-container">
  <div class="tab">
    <button class="tablinks" onclick="openPage(event, 'Profile')"><h4><i class="fas fa-user-astronaut"></i>My Profile</h4></button>
    <button class="tablinks" onclick="openPage(event, 'Interests')"><h4><i class="fas fa-space-shuttle"></i>My Interests</h4></button>
    <button class="tablinks" onclick="openPage(event, 'Celestials')"><h4><i class="fas fa-sun"></i>My Celestials</h4></button>
  </div>

  <div id="Profile" class="tabcontent">
    <div class="tab-body">
      <h2><%= current_user.first_name %> <%= current_user.last_name %></h2>
      <h3><%= current_user.bio %></h3>
      <button class="btn btn-primary"><%= link_to "Edit My Profile", edit_user_path(current_user) %></button>
      <button class="btn btn-primary"><%= link_to "Delete My Profile", user_registration_path(current_user), method: :delete, data: { confirm: "Are you sure about this? The celestial gods will be angry!"} %></button>
    </div>
  </div>

  <div id="Interests" class="tabcontent">
    <div class="tab-body">
      <div class="tab-card">
        <% 'current_user.celestials.interests.each do |interest|' %>
        <%= 'interest.name' %>
        <div class="btn btn-primary">See Details</div>
      </div>
    </div>
  </div>

  <div id="Celestials" class="tabcontent">
    <div class="tab-body">
      <div class="tab-card">
        <% current_user.celestials.each do |celestial| %>
          <p><strong><%= celestial.name %></strong> (category: <%= celestial.category %>)</p>
          <p>â‚¬<%= celestial.price %></p>
           <button class="btn btn-primary"><%= link_to "Delete Celestial", celestial_path(celestial), method: :delete, data: { confirm: "Are you sure?"} %></button>
        <% end %>
      </div>
      <div class="btn btn-primary"><%= link_to "Add a Celestial", new_celestial_path(current_user) %></div>
    </div>
  </div>

</div>
<script>



function openPage(evt, headingName) {

    // Declare all variables
    var i, tabcontent, tablinks;
    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(headingName).style.display = "block";
    event.currentTarget.className += " active";
}


openPage(event,'Profile');
</script>

